<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mypageMapper">
	<resultMap id="mypageResultSet" type="Mypage">
		<id property="userId" column="USERID"/>
		<result property="intro" column="INTRO"/>
		<result property="goal" column="GOAL"/>
		<result property="interest" column="INTEREST"/>
		<result property="myExp" column="MYEXP"/>
		<result property="myLevel" column="MYLEVEL"/>
	</resultMap>
	
	<select id="my_profileView" resultMap="mypageResultSet">
		SELECT *
		FROM MYPAGE
		WHERE USERID=#{userId}
	</select>
	
	<select id="followCount" resultType="_int">
		SELECT COUNT(*)
		FROM FOLLOW
		WHERE HOST=#{userId}
	</select>
	
	<select id="followingCount" resultType="_int">
		SELECT COUNT(*)
		FROM FOLLOW
		WHERE FOLLOWER=#{userId}
	</select>
	
	<update id="updateProfile" parameterType="Mypage">
		UPDATE MYPAGE
		SET INTRO=#{intro},GOAL=#{goal},INTEREST=#{interest}
		WHERE USERID=#{userId}
	</update>
</mapper>