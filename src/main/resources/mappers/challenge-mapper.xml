<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="challengeMapper">
	<resultMap id="challengeResultSet" type="Challenge">
		<id property="chId" column="CHID"/>
		<result property="userId" column="USERID"/>
		<result property="chName" column="CHNAME"/>
		<result property="chPicture" column="CHPICTURE"/>
		<result property="chContent" column="CHCONTENT"/>
		<result property="startDate" column="STARTDATE"/>
		<result property="endDate" column="ENDDATE"/>
		<result property="category" column="CATEGORY"/>
		<result property="ceMethod" column="CEMETHOD"/>
		<result property="price" column="PRICE"/>
		<result property="totalPrice" column="TOTALPRICE"/>
		<result property="minPerson" column="MINPERSON"/>
		<result property="maxPerson" column="MAXPERSON"/>
		<result property="chPeople" column="CHPEOPLE"/>
	</resultMap>
	
	<select id="getListCount" resultType="_int">
		SELECT COUNT(*)
		FROM CHALLENGE
	</select>
	
	<select id="selectList" resultMap="challengeResultSet">
		SELECT *
		FROM CHALLENGE
	</select>
	
	<select id="selectOneDetail" resultMap="challengeResultSet">
		SELECT *
		FROM CHALLENGE
		WHERE CHID=#{chId}
	</select>
	
	<select id="getSearchListCount" parameterType="Challenge" resultType="_int">
		SELECT COUNT(*)
		FROM CHALLENGE
		
			<if test="chName != null">
				AND CHNAME LIKE '%' || #{chName} || '%'
			</if>
			<if test="userId != null">
				AND USERID LIKE '%' || #{userId} || '%'
			</if>
			<if test="startDate != null">
				AND STARTDATE LIKE '%' || #{startDate} || '%'
			</if>
			<if test="endDate != null">
				AND ENDDATE LIKE '%' || #{endDate} || '%'
			</if>
	</select> 
	
	<select id="getSelectSearchList" resultMap="challengeResultSet">
		SELECT *
		FROM CHALLENGE
		
			<if test="chName != null">
				WHERE CHNAME LIKE '%' || #{chName} || '%'
			</if>
			<if test="userId != null">
				WHERE USERID LIKE '%' || #{userId} || '%'
			</if>
			<if test="startDate != null">
				WHERE STARTDATE LIKE '%' || #{startDate} || '%'
			</if>
			<if test="endDate != null">
				WHERE ENDDATE LIKE '%' || #{endDate} || '%'
			</if>
		ORDER BY CHID DESC
	</select>
</mapper>